valid([]).
valid([Head|Tail]) :-
  fd_all_different(Head),
  valid(Tail).

sudoku(Sudoku, Solution) :-
  Sudoku = Solution,
  Sudoku = [C11, C12, C13, C14, C15, C16, C17, C18, C19,
            C21, C22, C23, C24, C25, C26, C27, C28, C29,
            C31, C32, C33, C34, C35, C36, C37, C38, C39,
            C41, C42, C43, C44, C45, C46, C47, C48, C49,
            C51, C52, C53, C54, C55, C56, C57, C58, C59,
            C61, C62, C63, C64, C65, C66, C67, C68, C69,
            C71, C72, C73, C74, C75, C76, C77, C78, C79,
            C81, C82, C83, C84, C85, C86, C87, C88, C89,
            C91, C92, C93, C94, C95, C96, C97, C98, C99],
  Box1 = [C11, C12, C13, C21, C22, C23, C31, C32, C33],
  Box2 = [C14, C15, C16, C24, C25, C26, C34, C35, C36],
  Box3 = [C17, C18, C19, C27, C28, C29, C37, C38, C39],
  Box4 = [C41, C42, C43, C51, C52, C53, C61, C62, C63],
  Box5 = [C44, C45, C46, C54, C55, C56, C64, C65, C66],
  Box6 = [C47, C48, C49, C57, C58, C59, C67, C68, C69],
  Box7 = [C71, C72, C73, C81, C82, C83, C91, C92, C93],
  Box8 = [C74, C75, C76, C84, C85, C86, C94, C95, C96],
  Box9 = [C77, C78, C79, C87, C88, C89, C97, C98, C99],
  Row1 = [C11, C12, C13, C14, C15, C16, C17, C18, C19],
  Row2 = [C21, C22, C23, C24, C25, C26, C27, C28, C29],
  Row3 = [C31, C32, C33, C34, C35, C36, C37, C38, C39],
  Row4 = [C41, C42, C43, C44, C45, C46, C47, C48, C49],
  Row5 = [C51, C52, C53, C54, C55, C56, C57, C58, C59],
  Row6 = [C61, C62, C63, C64, C65, C66, C67, C68, C69],
  Row7 = [C71, C72, C73, C74, C75, C76, C77, C78, C79],
  Row8 = [C81, C82, C83, C84, C85, C86, C87, C88, C89],
  Row9 = [C91, C92, C93, C94, C95, C96, C97, C98, C99],
  Col1 = [C11, C21, C31, C41, C51, C61, C71, C81, C91],
  Col2 = [C12, C22, C32, C42, C52, C62, C72, C82, C92],
  Col3 = [C13, C23, C33, C43, C53, C63, C73, C83, C93],
  Col4 = [C14, C24, C34, C44, C54, C64, C74, C84, C94],
  Col5 = [C15, C25, C35, C45, C55, C65, C75, C85, C95],
  Col6 = [C16, C26, C36, C46, C56, C66, C76, C86, C96],
  Col7 = [C17, C27, C37, C47, C57, C67, C77, C87, C97],
  Col8 = [C18, C28, C38, C48, C58, C68, C78, C88, C98],
  Col9 = [C19, C29, C39, C49, C59, C69, C79, C89, C99],
  fd_domain(Sudoku, 1, 9),
  valid([Row1, Row2, Row3, Row4, Row5, Row6, Row7, Row8, Row9, Col1, Col2, Col3, Col4, Col5, Col6, Col7, Col8, Col9, Box1, Box2, Box3, Box4, Box5, Box6, Box7, Box8, Box9]).

sudoku([_, _, 4, 8, _, _, _, 1, 7,
        6, 7, _, 9, _, _, _, _, _,
        5, _, 8, _, 3, _, _, _, 4,
        3, _, _, 7, 4, _, 1, _, _,
        _, 6, 9, _, _, _, 7, 8, _,
        _, _, 1, _, 6, 9, _, _, 5,
        1, _, _, _, 8, _, 3, _, 6,
        _, _, _, _, _, 6, _, 9, 1,
        2, 4, _, _, _, 1, 5, _, _],
        Solution). % Solution = [9,3,4,8,2,5,6,1,7,6,7,2,9,1,4,8,5,3,5,1,8,6,3,7,9,2,4,3,2,5,7,4,8,1,6,9,4,6,9,1,5,3,7,8,2,7,8,1,2,6,9,4,3,5,1,9,7,5,8,2,3,4,6,8,5,3,4,7,6,2,9,1,2,4,6,3,9,1,5,7,8]



% Problem statement                 Solution
%
%   .  .  4 | 8  .  . | .  1  7	     9  3  4 | 8  2  5 | 6  1  7
%           |         |                      |         |
%   6  7  . | 9  .  . | .  .  .	     6  7  2 | 9  1  4 | 8  5  3
%           |         |                      |         |
%   5  .  8 | .  3  . | .  .  4      5  1  8 | 6  3  7 | 9  2  4
%   --------+---------+--------      --------+---------+--------
%   3  .  . | 7  4  . | 1  .  .      3  2  5 | 7  4  8 | 1  6  9
%           |         |                      |         |
%   .  6  9 | .  .  . | 7  8  .      4  6  9 | 1  5  3 | 7  8  2
%           |         |                      |         |
%   .  .  1 | .  6  9 | .  .  5      7  8  1 | 2  6  9 | 4  3  5
%   --------+---------+--------      --------+---------+--------
%   1  .  . | .  8  . | 3  .  6	     1  9  7 | 5  8  2 | 3  4  6
%           |         |                      |         |
%   .  .  . | .  .  6 | .  9  1	     8  5  3 | 4  7  6 | 2  9  1
%           |         |                      |         |
%   2  4  . | .  .  1 | 5  .  .      2  4  6 | 3  9  1 | 5  7  8
